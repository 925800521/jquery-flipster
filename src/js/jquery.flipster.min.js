(function(e){e.fn.flipster=function(t){var n=typeof t==="string"?true:false;if(n){var r=t;var s=Array.prototype.slice.call(arguments,1)}else{var o={itemContainer:"ul",itemSelector:"li",style:"coverflow",start:"center",enableKeyboard:true,enableMousewheel:true,enableTouch:true,enableNav:false,enableNavButtons:false,onItemSwitch:function(){},disableRotation:false,prevText:"Previous",nextText:"Next",navPosition:"before"};var u=e.extend({},o,t);var a=e(window)}return this.each(function(){function y(){v=0}function b(){f.height(w());t.css("height","auto");if(u.style==="carousel"){f.width(l.width())}}function w(){var t=0;l.each(function(){if(e(this).height()>t)t=e(this).height()});return t}function E(){if(u.enableNav&&l.length>1){var n=[],r=[],i=[];l.each(function(){var t=e(this).data("flip-category"),s=e(this).attr("id"),o=e(this).attr("title");if(typeof t!=="undefined"){if(e.inArray(t,n)<0){n.push(t);i[t]='<li class="flip-nav-category"><a href="#" class="flip-nav-category-link" data-flip-category="'+t+'">'+t+'</a>\n<ul class="flip-nav-items">\n'}}if(e.inArray(s,r)<0){r.push(s);link='<a href="#'+s+'" class="flip-nav-item-link">'+o+"</a></li>\n";if(typeof t!=="undefined"){i[t]=i[t]+'<li class="flip-nav-item">'+link}else{i[s]='<li class="flip-nav-item no-category">'+link}}});navDisplay='<ul class="flipster-nav">\n';for(var s in n){i[n[s]]=i[n[s]]+"</ul>\n</li>\n"}for(var o in i){navDisplay+=i[o]}navDisplay+="</ul>";if(u.navPosition.toLowerCase()=="after")c=e(navDisplay).appendTo(t);else c=e(navDisplay).prependTo(t);h=c.find("a").on("click",function(t){var n;if(e(this).hasClass("flip-nav-category-link")){n=l.filter("[data-flip-category='"+e(this).data("flip-category")+"']")}else{n=e(this.hash)}if(n.length){N(n);t.preventDefault()}})}}function S(){if(u.enableNav&&l.length>1){currentItem=e(l[p]);c.find(".flip-nav-current").removeClass("flip-nav-current");h.filter("[href='#"+currentItem.attr("id")+"']").addClass("flip-nav-current");h.filter("[data-flip-category='"+currentItem.data("flip-category")+"']").parent().addClass("flip-nav-current")}}function x(){if(u.enableNavButtons&&l.length>1){t.find(".flipto-prev, .flipto-next").remove();t.append("<a href='#' class='flipto-prev'>"+u.prevText+"</a> <a href='#' class='flipto-next'>"+u.nextText+"</a>");t.children(".flipto-prev").on("click",function(e){N("left");e.preventDefault()});t.children(".flipto-next").on("click",function(e){N("right");e.preventDefault()})}}function T(){var t=e(l[p]).addClass("flip-current");l.removeClass("flip-prev flip-next flip-current flip-past flip-future no-transition");if(u.style==="carousel"){l.addClass("flip-hidden");var n=e(l[p+1]),r=e(l[p+2]),s=e(l[p-1]),o=e(l[p-2]);if(p===0){s=l.last();o=s.prev()}else if(p===1){o=l.last()}else if(p===l.length-2){r=l.first()}else if(p===l.length-1){n=l.first();r=e(l[1])}r.removeClass("flip-hidden").addClass("flip-future");o.removeClass("flip-hidden").addClass("flip-past");n.removeClass("flip-hidden").addClass("flip-next");s.removeClass("flip-hidden").addClass("flip-prev")}else{var a=t.outerWidth()/2;var c=0;var h=f.width();var d=t.outerWidth();var v=l.index(t)*d/2+a/2;l.removeClass("flip-hidden");for(i=0;i<l.length;i++){var m=e(l[i]);var y=m.outerWidth();if(i<p){m.addClass("flip-past").css({"z-index":i,left:i*y/2+"px"})}else if(i>p){m.addClass("flip-future").css({"z-index":l.length-i,left:i*y/2+a+"px"})}}t.css({"z-index":l.length+1,left:v+"px"});c=v+d/2-h/2;var w=-1*c+"px";if(g){var E=e(".flip-past");var x=e(".flip-future");e(".flip-current").css("zoom","1.0");for(i=0;i<E.length;i++){e(E[i]).css("zoom",100-(E.length-i)*5+"%")}for(i=0;i<x.length;i++){e(x[i]).css("zoom",100-(i+1)*5+"%")}f.animate({left:w},333)}else{f.css("left",w)}}t.addClass("flip-current").removeClass("flip-prev flip-next flip-past flip-future flip-hidden");b();S();u.onItemSwitch.call(this)}function N(e){if(l.length>1){if(e==="left"){if(p>0){p--}else{p=l.length-1}}else if(e==="right"){if(p<l.length-1){p++}else{p=0}}else if(typeof e==="number"){p=e}else{p=l.index(e)}T()}}function C(){t.addClass("flipster flipster-active flipster-"+u.style).css("visibility","hidden");if(u.disableRotation)t.addClass("no-rotate");f=t.find(u.itemContainer).addClass("flip-items");l=f.find(u.itemSelector).addClass("flip-item flip-hidden").wrapInner("<div class='flip-content' />");var n=""==="v";var r=document.createElement("b");r.innerHTML="<!--[if IE 9]><i></i><![endif]-->";var i=r.getElementsByTagName("i").length===1;if(n||i){g=true;f.addClass("compatibility")}E();x();if(u.start&&l.length>1){if(u.start==="center"){if(!l.length%2){p=l.length/2+1}else{p=Math.floor(l.length/2)}}else{p=u.start}}b();t.hide().css("visibility","visible").fadeIn(400,function(){T()});a.resize(function(){b();T()});l.on("click",function(t){if(!e(this).hasClass("flip-current")){t.preventDefault()}N(l.index(this))});if(u.enableKeyboard&&l.length>1){a.on("keydown.flipster",function(e){v++;if(v%7!==0&&v!==1)return;var t=e.which;if(t===37){e.preventDefault();N("left")}else if(t===39){e.preventDefault();N("right")}});a.on("keyup.flipster",function(e){v=0})}if(u.enableMousewheel&&l.length>1){t.on("mousewheel.flipster",function(e){m=window.setTimeout(y,500);v++;if(v%4!==0&&v!==1)return;window.clearTimeout(m);if(e.originalEvent.wheelDelta/120>0){N("left")}else{N("right")}e.preventDefault()})}if(u.enableTouch&&l.length>1){t.on("touchstart.flipster",function(e){d=e.originalEvent.targetTouches[0].screenX});t.on("touchmove.flipster",function(e){e.preventDefault();var t=e.originalEvent.targetTouches[0].screenX;var n=t-d;if(n>l[0].clientWidth/1.75){N("left");d=t}else if(n<-1*(l[0].clientWidth/1.75)){N("right");d=t}});t.on("touchend.flipster",function(e){d=0})}}var t=e(this);var o;if(n){o=t.data("methods");return o[r].apply(this,s)}var f;var l;var c;var h;var p=0;var d=0;var v=0;var m;var g;o={jump:N};t.data("methods",o);if(!t.hasClass("flipster-active")){C()}})}})(jQuery)